<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grid based map Prototye</title>
</head>
<style>
    td {
        border: 1px solid black;
        min-width: 75px;
        max-width: 75px;
        padding: 0px;
        overflow: hidden;
    }

    td>div {
        display: flex;
        justify-content: center;
        align-items: center;
        max-height: 75px;
        min-height: 75px;
        text-align: center;
    }

    table {
        border-collapse: collapse;
        text-align: center;
        overflow: hidden;
    }
</style>

<body>
    <h2><u>Release 1</u></h2>
    <div id="text-cord">
        <h4>Location</h4>
        <p id="playerlocation">player : (0,0)</p>
    </div>
    <table>
        <!-- 4 rows each have a 8-9 character limit (excluding spaces)-->
        <tr class="row">
            <td><div class="col"></div></td>
            <td><div class="col"></div></td>
            <td><div class="col"></div></td>
        </tr>
        <tr class="row">
            <td><div class="col"></div></td>
            <td><div class="col"></div></td>
            <td><div class="col"></div></td>
        </tr>
        <tr class="row">
            <td><div class="col"></div></td>
            <td><div class="col"></div></td>
            <td><div class="col"></div></td>
        </tr>
    </table>
</body>
<script>
    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects for creating objects

    var player = {
        cord: {
            x: 0,
            y: 0
        },
        ori_cord: {
            x: 0,
            y: 0
        },
        hp: 10
    };
    var obj = {
        tree: {cord: [[2,0],[2,1]]}
    };
    for (let i = 0; i < obj.tree.cord.length; i++) {
        document.getElementsByClassName("row")[obj.tree.cord[i][1]].getElementsByClassName("col")[obj.tree.cord[i][0]].textContent = "tree";
        console.log(i);
    }

    const PlayerLocation = document.getElementById("playerlocation");
    document.addEventListener("keydown", function (event) {
        // Im too lazy to fix this lol
        // it's supposed to start you at the center not at the top-left
        // player.y = (event.code == "ArrowUp") ? player.y + 1 : player.y;
        // player.y = (event.code == "ArrowDown") ? player.y - 1 : player.y;
        player.ori_cord.x = player.cord.x;
        player.ori_cord.y = player.cord.y;
        player.cord.y = (event.code == "ArrowUp") ? player.cord.y - 1 : player.cord.y;
        player.cord.y = (event.code == "ArrowDown") ? player.cord.y + 1 : player.cord.y;
        player.cord.x = (event.code == "ArrowRight") ? player.cord.x + 1 : player.cord.x;
        player.cord.x = (event.code == "ArrowLeft") ? player.cord.x - 1 : player.cord.x;
        update();
    }
    );
    function update() {
        document.getElementsByClassName("row")[player.ori_cord.y].getElementsByClassName("col")[player.ori_cord.x].style.backgroundColor = "white";
        player.cord.x = player.cord.x > 2 ? player.cord.x - 1 : player.cord.x;
        player.cord.x = player.cord.x == -1 ? player.cord.x + 1 : player.cord.x;

        player.cord.y = player.cord.y > 2 ? player.cord.y - 1 : player.cord.y;
        player.cord.y = player.cord.y == -1 ? player.cord.y + 1 : player.cord.y;


        PlayerLocation.innerHTML = "player : (" + player.cord.x + "," + player.cord.y + ")";
        document.getElementsByClassName("row")[player.cord.y].getElementsByClassName("col")[player.cord.x].style.backgroundColor = "rgb(0,255,0)";
    }
</script>

</html>